<div
  [ngClass]="{'arg-comp': true, 'against': argumentMeta.isAgainst, 'insert-animation': true}"
  (mouseenter)="hovered = true"
  (mouseleave)="hovered = false">
  <div class="arg">
  <div class="user-badges">
    <mat-menu #reorderMenu="matMenu">
      <button
	mat-menu-item
	(click)="selectionList.remove(argumentId)">
	Disown argument
      </button>
      <button
	mat-menu-item
	*ngIf="selectionList.notFirst(argumentId)"
	(click)="selectionList.moveUp(argumentId)">
	Promote argument to
	#{{selectionList.selectionOrdinal(argumentId) - 1}}
      </button>
      <button
	mat-menu-item
	*ngIf="selectionList.notLast(argumentId)"
	(click)="selectionList.moveDown(argumentId)">
	Demote argument to #{{selectionList.selectionOrdinal(argumentId) + 1}}
      </button>
    </mat-menu>
    <div
      *ngIf="hasOpinion && selectionList.isSelected(argumentId) && currentUser as user"
      class="one-badge-cont current-user"
      [matMenuTriggerFor]="reorderMenu">
      <div class="ordinal-cont">
	<span class="ordinal current-user">
	  #{{selectionList.selectionOrdinal(argumentId)}}
	</span>
      </div>
      <app-user-badge
	class="current-user"
	[user]="user"
	[expanded]="true">
      </app-user-badge>
    </div>
    <div
      *ngIf="newSelectionOrdinal as ordinal"
      class="one-badge-cont"
      (click)="selectionList.add(argumentId)">
      <div
	class="transparent">
	<div class="ordinal-cont">
	  <span class="ordinal current-user">
	    #{{ordinal}}
	  </span>
	</div>
	<app-user-badge
	  *ngIf="currentUser as user"
	  class="current-user"
	  [user]="user"
	  [expanded]="true">
	</app-user-badge>
      </div>
      <div class="bigplus-cont">
	<span class="bigplus">+</span>
      </div>
    </div>
    <div
      *ngIf="disagreerSelectionOrdinal && disagreer as user"
      class="one-badge-cont">
      <div class="ordinal-cont">
	<span class="ordinal disagreer">
	  #{{disagreerSelectionOrdinal}}
	</span>
      </div>
      <app-user-badge
	class="disagreer"
	[user]="user"
	[expanded]="true">
      </app-user-badge>
    </div>
  </div>
    <div class="argument-container">
      <mat-card class="argument-card">
	<app-ano-text [textId]="argumentMeta.textId"></app-ano-text>
      </mat-card>
    </div>
  </div>
  <div class="counter">
    <div class="counter-spacer">
    </div>
    <div *ngIf="!addingCounter" class="belt-container">
      <div [@counterBeltTrigger]="'x'" class="belt" *ngFor="let idx of [-1, 0, 1]; trackBy: beltTrackBy">
	<mat-card
	  *ngIf="orderedCounters[idx + displayPosition] as counter"
	  class="counter-card"
	  (click)="repositionBelt(idx)">
	  <mat-card-content>
	    <app-ano-text [textId]="counter.textId"></app-ano-text>
	  </mat-card-content>
	  <mat-card-actions>
	    <button
	      mat-raised-button
	      *ngIf="selectedCounter !== counter.id"
	      (click)="doSelectCounter(counter.id, $event)">
	      <mat-icon>flag</mat-icon>
	    </button>
	  </mat-card-actions>
	</mat-card>
	<button
	  class="new-counter-button"
	  *ngIf="displayPosition + idx === -1"
	  mat-raised-button
	  (click)="addingCounter = true">
	  +
	</button>
      </div>
    </div>
    <app-new-counter *ngIf="addingCounter" [claimId]="claimId" [argumentId]="argumentMeta.id" (onCancel)="addingCounter = false" (onSaved)="reload()">
    </app-new-counter>
  </div>
</div>
